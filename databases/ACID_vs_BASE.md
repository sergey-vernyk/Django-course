Різниця між базами даних `ACID` та `BASE`?

`ACID` та `BASE` – це моделі транзакцій бази даних, які визначають, як база даних організовує та маніпулює даними. У контексті баз даних транзакція – це будь-яка операція, яку база даних вважає єдиною одиницею роботи. Транзакція має бути повністю завершена, щоб база даних залишалася несуперечливою. Наприклад, коли ви переказуєте гроші з одного банківського рахунку на інший, гроші повинні залишити ваш рахунок і бути додані до рахунку третьої сторони. Ви не можете назвати транзакцію завершеною без виконання обох кроків.

Бази даних `ACID` надають пріоритет узгодженості над доступністю – вся транзакція завершується невдачею, якщо на будь-якому кроці в рамках транзакції виникає помилка. На противагу цьому, бази даних BASE надають пріоритет доступності над узгодженістю. Замість того, щоб повнстю відхилити транзакцію, користувачі можуть тимчасово отримати доступ до неузгоджених даних. Узгодженість даних зрештою досягається, але не одразу.


## Ключові принципи: `ACID` у порівнянні з `BASE`

`ACID` та `BASE` – це абревіатури для різних властивостей бази даних, які відображають поведінку бази даних під час обробки онлайн-транзакцій.

ACID розшифровується як `атомарність`, `узгодженість`, `ізоляція` та `довговічність`.

### Атомарність

Атомарність гарантує, що всі операції в одній транзакції бази даних або повністю завершені, або повернуті до початкового стану. *Наприклад, у системі бронювання обидва завдання – бронювання місць та оновлення даних клієнта – повинні бути виконані в одній транзакції. Ви не можете зарезервувати місця для неповного профілю клієнта. До даних не вносяться жодні зміни, якщо будь-яка частина транзакції завершиться невдачею.*

### Узгодженість
Узгодженість гарантує, що дані відповідають заздалегідь визначеним обмеженням цілісності та бізнес-правилам. Навіть якщо кілька користувачів одночасно виконують подібні операції, дані залишаються узгодженими для всіх. *Наприклад, узгодженість гарантує, що під час переказу коштів з одного рахунку на інший загальний баланс до та після транзакції залишається незмінним. Якщо на рахунку A є 200 доларів, а на рахунку B – 400 доларів, загальний баланс становить 600 доларів. Після того, як A перерахує B $100, A має $100, а B має $500. Загальний баланс все ще становить $600.*

### Ізоляція
Ізоляція гарантує, що нова транзакція, яка отримує доступ до певного запису, чекає завершення попередньої транзакції, перш ніж розпочати свою роботу. Це гарантує, що одночасні транзакції не заважатимуть одна одній, зберігаючи ілюзію, що вони виконуються послідовно. *Іншим прикладом є багатокористувацька система управління запасами. Якщо один користувач оновлює кількість продукту, інший користувач, який отримує доступ до тієї ж інформації про продукт, побачить узгоджене та ізольоване представлення даних, на яке не вплине поточне оновлення, доки воно не буде зафіксовано.*

### Довговічність
Довговічність гарантує, що база даних зберігатиме всі зафіксовані записи, навіть якщо система зазнає збою. Це гарантує, що коли ACID-транзакції зафіксовані, всі зміни є постійними та не зазнають впливу подальших системних збоїв. *Наприклад, у програмі обміну повідомленнями, коли користувач надсилає повідомлення та отримує підтвердження успішної доставки, довговічність гарантує, що повідомлення ніколи не буде втрачено. Це залишається сталим, навіть якщо програма або сервер зазнають збою.*

`BASE`

BASE розшифровується як `basically available` (базово доступна), `soft state` (м’який стан) та `eventually consistent` (зрештою узгоджена).
Ця абревіатура підкреслює, що підхід `BASE` є протилежністю `ACID` — подібно до їхніх хімічних аналогів.

### Базово доступний
«Базово доступний» означає одночасний доступ користувачів до бази даних у будь-який час. Одному користувачеві не потрібно чекати, поки інші завершать транзакцію, перш ніж оновлювати дані. *Наприклад, під час раптового сплеску трафіку на платформі електронної комерції система може надати пріоритет обслуговуванню списків продуктів та прийняттю замовлень. Навіть якщо є невелика затримка в оновленні кількості товарів, користувачі продовжують оформлювати замовлення.*

## М’який стан
«М’який стан» стосується поняття, що дані можуть мати перехідні або тимчасові стани, які можуть змінюватися з часом, навіть без зовнішніх тригерів або вхідних даних. Він описує перехідний стан запису, коли кілька програм оновлюють його одночасно. Значення запису остаточно остаточно формується лише після завершення всіх транзакцій. *Наприклад, якщо користувачі редагують публікацію в соціальних мережах, зміна може бути не відразу видимою для інших користувачів. Однак пізніше публікація оновлюється сама по собі (відображаючи попередню зміну), навіть якщо жоден користувач не ініціював її.*

## Зрештою, узгодженість
«Зрештою, узгодженість» означає, що запис досягне узгодженості після завершення всіх одночасних оновлень. На цьому етапі програми, що роблять запис, бачитимуть однакове значення. *Наприклад, розглянемо розподілену систему редагування документів, де кілька користувачів можуть одночасно редагувати документ. Якщо користувач A та користувач B одночасно редагують один і той самий розділ документа, їхні локальні копії можуть тимчасово відрізнятися, доки зміни не будуть поширені та синхронізовані. Однак з часом система забезпечує остаточну узгодженість, поширюючи та об'єднуючи зміни, внесені різними користувачами.*


## Ключові відмінності: ACID порівняно з BASE
Існують компроміси при виборі між моделями транзакцій бази даних `ACID` та `BASE`.

### Масштабування
Масштабувати модель транзакцій бази даних `ACID` складніше, оскільки вона зосереджена на узгодженості. Для будь-якого запису в будь-який момент часу дозволена лише одна транзакція, що ускладнює горизонтальне масштабування.

Крім того, ви можете масштабувати модель бази даних `BASE` горизонтально, оскільки їй не потрібно підтримувати сувору узгодженість. Додавання кількох вузлів у кластері бази даних дозволяє моделі `BASE` покращити доступність даних, що є принципом, що керує архітектурою бази даних.

### Гнучкість
Бази даних `ACID` менш гнучкі під час обробки даних. Вона повинна гарантувати негайну узгодженість, але база даних `ACID` може обмежувати доступ до деяких програм, якщо в ній виникають перебої в мережі або живлення. Аналогічно, програми повинні чекати своєї черги для оновлення даних, якщо інші програмні модулі обробляють певний запис. І навпаки, бази даних `BASE` є більш гнучкими. Замість того, щоб нав'язувати суворі обмеження, `BASE` дозволяє програмам змінювати записи, коли вони доступні.

### Продуктивність
База даних `ACID` може мати проблеми з продуктивністю під час обробки великих обсягів даних або одночасних запитів на обробку. Оскільки дані обробляються в суворому порядку, накладні витрати в кожній транзакції створюють затримки, які впливають на всі програми, що отримують доступ до запису.

Натомість програми, що отримують доступ до бази даних `BASE`, можуть обробляти записи в будь-який час. Це зменшує надмірний час очікування та покращує пропускну здатність бази даних.

### Синхронізація
База даних `ACID` потребує механізму синхронізації для фіксації змін з транзакції та відображення їх у всіх пов'язаних записах. Водночас вона повинна блокувати певний запис від інших сторін, доки транзакція не завершиться або не буде відхилена. Тим часом база даних `BASE` працює без блокування записів, синхронізуючи їх зрештою без гарантій часу. Працюючи з базами даних `BASE`, розробники знають, що під час обробки певних записів можуть виникнути невідповідності, і вживають необхідних запобіжних заходів у програмі.


## Коли використовувати: `ACID` порівняно з `BASE`

Незважаючи на відмінності, системи баз даних `ACID` та `BASE` є актуальними в різних застосуваннях. 

`ACID` є ідеальним варіантом для корпоративного використання, що потребує узгодженості, надійності та передбачуваності даних. Наприклад, банки використовують базу даних `ACID` для зберігання транзакцій клієнтів, оскільки цілісність даних є головним пріоритетом. 

В той же час бази даних `BASE` є кращим варіантом для онлайн-аналітичної обробки менш структурованих даних великого обсягу. Наприклад, веб-сайти електронної комерції використовують бази даних `BASE` для оновлення цін на продукти, які часто змінюються. У цьому випадку точність ціноутворення менш важлива, ніж надання всім клієнтам доступу до ціни продукту в режимі реального часу.